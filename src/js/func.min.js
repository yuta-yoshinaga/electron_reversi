function set_masu_size_squer(){var e,t,s=$(window).height(),r=$(window).width();console.log("height : "+s+"px"),console.log("width : "+r+"px"),e=(t=s<r?s-100:r-100)/reversiSetting.mMasuCnt,$(".reversi_field").width(t+"px"),$(".reversi_field").height(t+"px"),$(".reversi_field .square-wrapper").each(function(){$(this).css("width",e+"px"),$(this).css("height",e+"px")}),$(".reversi_field .square-wrapper .content").each(function(){$(this).css("line-height",$(this).height()+"px")})}function appInit(){$(".reversi_field").empty();for(var e=0;e<reversiSetting.mMasuCnt;e++){var t=$('<div class="my_row"></div>');t.addClass("pos_row"+String(e)),$(".reversi_field").append(t);for(var s=0;s<reversiSetting.mMasuCnt;s++){var r=$('<div class="square-wrapper"><div class="spacer"><div class="content"></div></div></div>');r.addClass("pos_x"+String(s)),r.addClass("pos_y"+String(e)),r.attr("data-x",String(s)),r.attr("data-y",String(e)),$(".pos_row"+String(e)).append(r)}}$(".reversi_field").append('<div class="clearfix"></div>'),$(".reversi_field").append('<div class="cur_col_msg"></div>'),$(".reversi_field").append('<div class="cur_sts_msg"></div>'),$(".reversi_field").append('<div class="col-xs-3">&nbsp;</div>'),$(".reversi_field").append('<div class="col-xs-3"><button type="button" class="btn btn-primary btn-sm reset">リセット</button></div>'),$(".reversi_field").append('<div class="col-xs-3"><button type="button" class="btn btn-info btn-sm setting" data-toggle="modal" data-target="#appMenuModal">設定</button></div>'),$(".reversi_field").append('<div class="col-xs-3">&nbsp;</div>'),$(".reversi_field").append('<div class="clearfix"></div>'),drawAll(),set_masu_size_squer()}function drawAll(){$(".reversi_field .square-wrapper").each(function(e,t){var s=$(this).data("x");drawSingle($(this).data("y"),s,REVERSI_STS_NONE,0,"")})}function viewMsgDlg(e,t){alert(e+"\n"+t)}function drawSingle(e,t,s,r,i){var a=$('.reversi_field .square-wrapper[data-x="'+t+'"][data-y="'+e+'"]'),n=a.find(".content");s==REVERSI_STS_NONE?(n.removeClass("stone_white"),n.removeClass("stone_black")):s==REVERSI_STS_BLACK?(n.removeClass("stone_white"),n.addClass("stone_black")):s==REVERSI_STS_WHITE&&(n.addClass("stone_white"),n.removeClass("stone_black")),1==r?(a.removeClass("cell_back_green"),a.removeClass("cell_back_magenta"),a.removeClass("cell_back_red"),a.addClass("cell_back_blue")):2==r?(a.removeClass("cell_back_green"),a.removeClass("cell_back_magenta"),a.addClass("cell_back_red"),a.removeClass("cell_back_blue")):3==r?(a.removeClass("cell_back_green"),a.addClass("cell_back_magenta"),a.removeClass("cell_back_red"),a.removeClass("cell_back_blue")):(a.addClass("cell_back_green"),a.removeClass("cell_back_magenta"),a.removeClass("cell_back_red"),a.removeClass("cell_back_blue")),n.text(i)}function curColMsg(e){$(".cur_col_msg").text(e)}function curStsMsg(e){$(".cur_sts_msg").text(e)}var reversiPlay=new ReversiPlay,reversiSetting=new ReversiSetting,storage=localStorage;$(document).ready(function(){var e=storage.getItem("appSetting");null!=e?reversiSetting=JSON.parse(e):storage.setItem("appSetting",JSON.stringify(reversiSetting));$('#mMode input[value="'+Number(reversiSetting.mMode)+'"]').parent().addClass("active"),$('#mType input[value="'+Number(reversiSetting.mType)+'"]').parent().addClass("active"),$('#mPlayer input[value="'+Number(reversiSetting.mPlayer)+'"]').parent().addClass("active"),$('#mAssist input[value="'+Number(reversiSetting.mAssist)+'"]').parent().addClass("active"),$('#mGameSpd input[value="'+Number(reversiSetting.mGameSpd)+'"]').parent().addClass("active"),$('#mEndAnim input[value="'+Number(reversiSetting.mEndAnim)+'"]').parent().addClass("active"),$('#mMasuCntMenu input[value="'+Number(reversiSetting.mMasuCntMenu)+'"]').parent().addClass("active"),$('#mTheme input[value="'+reversiSetting.mTheme+'"]').parent().addClass("active");var t=reversiSetting.mTheme;$('head link[href="./css/theme/'+t+'/bootstrap.min.css"]').remove();var s='<link href="./css/theme/'+reversiSetting.mTheme+'/bootstrap.min.css" rel="stylesheet" media="screen">';$("head").append(s),appInit(),reversiPlay.setSetting(reversiSetting),reversiPlay.reset(),$(".reversi_field").on("click",".square-wrapper",function(){var e=$(this).data("x"),t=$(this).data("y");console.log("x = "+e+",y = "+t),reversiPlay.reversiPlay(t,e)}),$(".reversi_field").on("click",".reset",function(){reversiPlay.reset()}),$("#appMenuModal").on("click",".btn-primary",function(){reversiSetting.mMode=$("#mMode .active input").val(),reversiSetting.mType=$("#mType .active input").val(),reversiSetting.mPlayer=$("#mPlayer .active input").val(),reversiSetting.mAssist=$("#mAssist .active input").val(),reversiSetting.mGameSpd=$("#mGameSpd .active input").val(),reversiSetting.mGameSpd==DEF_GAME_SPD_FAST?(reversiSetting.mPlayCpuInterVal=DEF_GAME_SPD_FAST_VAL2,reversiSetting.mPlayDrawInterVal=DEF_GAME_SPD_FAST_VAL):reversiSetting.mGameSpd==DEF_GAME_SPD_MID?(reversiSetting.mPlayCpuInterVal=DEF_GAME_SPD_MID_VAL2,reversiSetting.mPlayDrawInterVal=DEF_GAME_SPD_MID_VAL):reversiSetting.mGameSpd==DEF_GAME_SPD_SLOW&&(reversiSetting.mPlayCpuInterVal=DEF_GAME_SPD_SLOW_VAL2,reversiSetting.mPlayDrawInterVal=DEF_GAME_SPD_SLOW_VAL),reversiSetting.mEndAnim=$("#mEndAnim .active input").val(),reversiSetting.mMasuCntMenu=$("#mMasuCntMenu .active input").val(),reversiSetting.mMasuCntMenu==DEF_MASU_CNT_6?reversiSetting.mMasuCnt=DEF_MASU_CNT_6_VAL:reversiSetting.mMasuCntMenu==DEF_MASU_CNT_8?reversiSetting.mMasuCnt=DEF_MASU_CNT_8_VAL:reversiSetting.mMasuCntMenu==DEF_MASU_CNT_10?reversiSetting.mMasuCnt=DEF_MASU_CNT_10_VAL:reversiSetting.mMasuCntMenu==DEF_MASU_CNT_12?reversiSetting.mMasuCnt=DEF_MASU_CNT_12_VAL:reversiSetting.mMasuCntMenu==DEF_MASU_CNT_14?reversiSetting.mMasuCnt=DEF_MASU_CNT_14_VAL:reversiSetting.mMasuCntMenu==DEF_MASU_CNT_16&&(reversiSetting.mMasuCnt=DEF_MASU_CNT_16_VAL);var e=reversiSetting.mTheme;reversiSetting.mTheme=$("#mTheme .active input").val(),$('head link[href="./css/theme/'+e+'/bootstrap.min.css"]').remove();var t='<link href="./css/theme/'+reversiSetting.mTheme+'/bootstrap.min.css" rel="stylesheet" media="screen">';$("head").append(t),storage.setItem("appSetting",JSON.stringify(reversiSetting)),appInit(),reversiPlay.setSetting(reversiSetting),reversiPlay.reset(),console.log(reversiSetting)}),$("#appMenuModal").on("hidden.bs.modal",function(){console.log("appMenuModal close")});var r=!1;$(window).resize(function(){!1!==r&&clearTimeout(r),r=setTimeout(function(){set_masu_size_squer()},200)})}),$(window).load(function(){set_masu_size_squer()}),reversiPlay.setViewMsgDlgFunc(viewMsgDlg),reversiPlay.setDrawSingleFunc(drawSingle),reversiPlay.setCurColMsgFunc(curColMsg),reversiPlay.setCurStsMsgFunc(curStsMsg);